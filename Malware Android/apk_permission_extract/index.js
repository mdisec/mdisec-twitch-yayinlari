const args = process.argv;

if (args.length < 3) {
  console.log("[!] Usage:");
  console.log("[!] node index.js <apk-file-path>");
  console.log("[!] Example:");
  console.log("[!] node index.js ./test.apk");
  return;
}

require("node-apk-parser-promise") // https://github.com/scorpiodawg/node-apk-parser-promise
  .load(args[2])
  .then((r) => {
    return r.readManifest();
  })
  .then((manifest) => {
    console.log("<uses-permissions>");
    manifest.usesPermissions.forEach((permission) => {
      console.log(permission.name);
    });
    console.log("</uses-permissions>");
    console.log("<permissions>");
    manifest.permissions.forEach((permission) => {
      console.log(permission.name);
    });
    console.log("</permissions>");
  })
  .catch((error) => {
    console.log("Oops bir≈üeyler ters gitti");
    console.log(error);
  });
